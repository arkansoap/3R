# Vizualization of covariance

## State of the art: different attempts to represent the covariance

### diagramme de Venn 

> A Venn diagram is a widely used diagram style that shows the logical relation between sets, popularized by John Venn in the 1880s. The diagrams are used to teach elementary set theory, and to illustrate simple set relationships in probability, logic, statistics, linguistics and computer science. A Venn diagram uses simple closed curves drawn on a plane to represent sets. Very often, these curves are circles or ellipses.

\begin{figure}
    \centering
    \includegraphics[width= 250 pt]{venn_colinearity.PNG}
    \caption{Ballentine Venn diagrams displaying modest and considerable collinearity.}
    \label{fig:my_label}
\end{figure}

### Visualizing Distributions of Covariance Matrices 

>> Covariance matrices and their corresponding distributions play an important role in statistics. To understand the properties of distributions, we often rely on visualization methods. [@VisCov]

Visualizing a distribution in a high-dimensional space is a challenge, with the additional
difficulty that covariance matrices must be positive semi-definite, a restriction that forces
the joint distribution of the covariances into an oddly-shaped subregion of the space.

```{r, echo = FALSE}
knitr::include_graphics("wtf_covViz.PNG")
```

### A Geometrical Interpretation of an Alternative Formula for the Sample Covariance

Kevin Hayes [@Hayes] proposes a new geometric and visual interpretation of covariance, based on the application of Hefferman's formula for variance. He extends this formula to the covariance of a sample to extract his results. 

- formula from heffernan definition of covariance : 

$$cov(X,Y)= \frac{2}{n(n-1)}\sum_{i=1}^{n-1}\sum_{j>i}^{n}\frac{1}{2}(x_i-x_j)(y_i - y_j)$$

>> Geometrically, $\frac{1}{2}(x_i-x_j)(y_i - y_j)$ is ±1 times the area right-triangle formed with the difference vector $(x_i — x_j, y_j)$ as its hypotenuse, where negatively sloped difference tors incur a $(—1)$ sign and positively sloped difference vectors take a $(+1)$ sign. [@Hayes]

```{r, echo = FALSE}
knitr::include_graphics("hayes.PNG")
```

### Covariance as Signed Area of Rectangles 

This article [@chudzicki] was written following a very interesting conversation on the **stats.statckexchange** site. The initial topic of this conversation was: how to explain covariance to someone who only understands the notion of mean? 

**instructions for use :** 

- Draw all possible such rectangles. Color them transparently, making the positive rectangles red (say) and the negative rectangles "anti-red" (blue).
- The covariance is the net amount of red in the plot (treating blue as negative values).

Let's deduce some properties of covariance. Understanding of these properties will be accessible to anyone who has actually drawn a few of the rectangles. :

- Bilinearity. 

Because the amount of red depends on the size of the plot, covariance is directly proportional to the scale on the x-axis and to the scale on the y-axis.

- Correlation. 

Covariance increases as the points approximate an upward sloping line and decreases as the points approximate a downward sloping line. This is because in the former case most of the rectangles are positive and in the latter case, most are negative.

- Relationship to linear associations. 

Because non-linear associations can create mixtures of positive and negative rectangles, they lead to unpredictable (and not very useful) covariances. Linear associations can be fully interpreted by means of the preceding two characterizations.

- Sensitivity to outliers. 

A geometric outlier (one point standing away from the mass) will create many large rectangles in association with all the other points. It alone can create a net positive or negative amount of red in the overall picture.

```{r, echo = FALSE}
knitr::include_graphics("covRect.PNG")
```

## Our current project: the package plotnetrec

Le package plotnetrec et leurs graphiques associées est une représentation alternative d'un scatterplot. Le but étant de déceler certaines particularités d'un jeu de données. 

\begin{minipage}{0.45\textwidth}
    \includegraphics{all.png}
\end{minipage} 
\hspace{3.5ex}
\begin{minipage}{0.45\textwidth}
Nous nous situons ici dans un cas normal, sans problèmes dans le jeu de données.

* Le graphique en haut à droite relies tout les observations par apport a leurs moyennes respectives et nous en traçons le rectangle. Si la pente de la diagonale est négatif, le rectangle et donc rouge et inversement, le rectangle est bleu.

* Le graphique en bas à gauche relies tout les observations entre elles et nous en traçons le rectangle. Si la pente de la diagonale est négatif, le rectangle et donc rouge et inversement, le rectangle est bleu.

* Le graphique en bas à droite est sensiblement identique à celui d'en bas a gauche à la différence où nous en tirons une de couleur nette. C'est à dire qu'une superpostion de rouge et de bleu vont s'annuler et donner l'absence de couleur. Inversement, le surprésence d'une des deux couleurs va donner une couleur bleu.

\end{minipage}

Il est temps de comparer avec certaines problèmatique.

### Hetrogeneity

\begin{minipage}{0.45\textwidth}
    \includegraphics{plotnetrec_heterogeneity.png}
\end{minipage} 
\hspace{3.5ex}
\begin{minipage}{0.45\textwidth}
  Nous remarquons trés clairement le caractére hétérogène de $Y$. Le graphique plotnetrec semble identifié la zone de séparation de deux groupes. 
\end{minipage}

### Heterosdasticity

\begin{minipage}{0.45\textwidth}
    \includegraphics{plotnetrec_heteroscedasticite.png}
\end{minipage} 
\hspace{3.5ex}
\begin{minipage}{0.45\textwidth}
  Le cas hétérogène est a retravaillé. 
\end{minipage}

### Non linear relationship

\begin{minipage}{0.45\textwidth}
    \includegraphics{plotetrect_non_linear.png}
\end{minipage} 
\hspace{3.5ex}
\begin{minipage}{0.45\textwidth}
    Le cas non linèaire semble trés expressif dans tous les graphiques ici présent. 
\end{minipage} 

